{% extends "layouts/customer_base.html" %}


{% block header %}<h4>{% t "customer.address.heading" %}</h4>{% endblock %}


{% block tabcontent %}
    {% if addresses %}
    <form method="post">
    {% csrf_token %}
    <div class="account_addresses">
        <div class="d-flex justify-content-between align-items-center">
            <div class="fw-bold">{% t "customer.address.manage_addresses" %}</div>
            <a href="{% url 'customer:address-create' %}" class="btn btn-primary">{% t "customer.address.add_new" %}</a>
        </div>
        <hr>
        <table class="account_table">
            <tbody>

                {% for address in addresses %}
                    <tr>
                                <td scope="row" data-label="Shipping Address">
                                    {% if address.is_default_for_shipping %}
                                        <span class="badge bg-success">{% t "customer.address.default_shipping_address" %}</span>
                                    {% endif %}
                                    {% if address.is_default_for_billing %}
                                        <span class="badge bg-primary">{% t "customer.address.default_billing_address" %}</span>
                                    {% endif %}
                                    <address>
                                        {% for field in address.active_address_fields %}
                                            {{ field }}</br>
                                        {% endfor %}
                                    </address>

                                </td>
                                <td data-label="">
                                    <div class="d-grid gap-2 d-md-flex justify-content-md-end flex-wrap">
                                        <a href="{% url 'customer:address-detail' pk=address.id %}" class="btn btn-primary btn-sm">{% t "global.button.edit" %}</a>
                                        <a href="#" data-delete-id="{{ address.id }}" class="btn btn-outline-danger btn-sm">{% t "global.button.delete" %}</a>
                                        {% if address.country.is_shipping_country and not address.is_default_for_shipping %}
                                            <a class="btn btn-light btn-sm" href="{% url 'customer:address-change-status' pk=address.id action='default_for_shipping' %}">
                                 
                                                {% t "customer.address.set_default_shipping_address" %}
                                            </a>
                                        {% endif %}
                                        {% if not address.is_default_for_billing %}
                                            <a class="btn btn-light btn-sm" href="{% url 'customer:address-change-status' pk=address.id action='default_for_billing' %}">
                          
                                                {% t "customer.address.set_default_billing_address" %}
                                            </a>
                                        {% endif %}
                                    </div>
                                </td>
                    </tr>
  
                {% endfor %}
            </tbody>
        </table>
        </form>{% include "partials/pagination.html" %}
    {% else %}
        <p>{% t "customer.address.no_addresses" %}</p>
        
        <a href="{% url 'customer:address-create' %}" class="btn btn-primary">{% t "customer.address.add_new" %}</a>
        
    {% endif %}

{% endblock tabcontent %}